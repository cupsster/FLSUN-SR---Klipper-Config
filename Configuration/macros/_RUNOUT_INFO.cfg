[gcode_macro _RUNOUT_INFO]
description: Helper: Print runout sensor status
gcode:
	{% set user = printer['gcode_macro _USER_VARIABLE'] %}
	{% set out = ['RUNOUT: ' + user.hw.runout.type|capitalize + ' Sensor'] if user.hw.runout.sensor
			else ['RUNOUT: Stored in file']                                if user.hw.runout.type == 'file'
			else ['RUNOUT: Not monitored'] %}

	{% set enable = printer["filament_" + user.hw.runout.type + "_sensor runout"].enabled if user.hw.runout.sensor else False %}
	{% set _dummy = out.append('Enabled: ' + enable|lower) if user.hw.runout.sensor %}
	{% set detected = printer["filament_" + user.hw.runout.type + "_sensor runout"].filament_detected if enable
				 else printer.save_variables.variables.filament_loaded                                if user.hw.runout.type == 'file' %}
	{% set _dummy = out.append('Detect Filament: ' + detected|lower) if detected is defined %}
	{action_respond_info(out|join("\n"))}